<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de Clics</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <header>
        <h1>Jeu de Clics</h1>
    </header>
    <nav>
        <a href="#">Accueil</a>
        <a href="#">Jeux</a>
        <a href="/hub_games/About">À propos</a>
        <a href="#">Contact</a>
    </nav>
    <main>
        <div id="tableau">
            <p id="score">Score : <span>0</span></p>
            <p id="chrono">Chrono : 30s</p>
        </div>
        <div id="jeu-container">
            <div id="jeu">
                <div id="forme"></div>
            </div>
        </div>
    </main>
    <footer>
        <div class="Copyright">
            &copy; 2023 By Klaynight. All rights reserved.
        </div>
    </footer>
    <!-- La boîte modale (popup) -->
    <div id="popup" class="modal">
        <div class="modal-content">
            <p id="instructions">Cliquez sur la forme bleue pour gagner des points.</p>
            <button id="play-button" onclick="startGame()">Jouer</button>
            <!-- <button id="return-button" onclick="returnToHub()">Retour au hub de jeu</button> -->
        </div>
    </div>
    <a id="return-button" href="/hub_games/">Retour au hub de jeu</a>
    <script>
        // JavaScript pour le jeu de clics
        let score = 0;
        const scoreElement = document.querySelector("#score span");
        const chronoElement = document.getElementById("chrono");
        const forme = document.getElementById("forme");

        // Fonction pour démarrer le jeu
        function startGame() {
            document.getElementById("popup").style.display = "none"; // Masquer la popup
            document.getElementById("jeu").style.pointerEvents = "auto"; // Activer le jeu
            deplacerForme(); // Démarrer le jeu en déplaçant la forme initiale
            startCountdown(); // Démarrer le compte à rebours
        }

        // Fonction pour afficher la popup
        function openPopup() {
            document.getElementById("popup").style.display = "block";
            document.getElementById("jeu").style.pointerEvents = "none"; // Désactiver le jeu
        }

        // Fonction pour fermer la popup
        function closePopup() {
            document.getElementById("popup").style.display = "none";
        }

        forme.addEventListener("click", () => {
            score++;
            scoreElement.textContent = score;
            deplacerForme();
        });

        function deplacerForme() {
            const jeu = document.getElementById("jeu");
            const maxX = jeu.clientWidth - forme.clientWidth;
            const maxY = jeu.clientHeight - forme.clientHeight;
            const nouvelleX = Math.random() * maxX;
            const nouvelleY = Math.random() * maxY;
            forme.style.left = nouvelleX + "px";
            forme.style.top = nouvelleY + "px";
            forme.style.backgroundColor = getRandomColor();
        }

        function getRandomColor() {
            const letters = "0123456789ABCDEF";
            let color = "#";
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // Compte à rebours
        let tempsRestant = 30;

        function startCountdown() {
            const chronoInterval = setInterval(() => {
                tempsRestant--;
                chronoElement.textContent = `Chrono : ${tempsRestant}s`;
                if (tempsRestant === 0) {
                    clearInterval(chronoInterval);
                    alert("Temps écoulé ! Votre score final est : " + score);
                    location.reload(); // Recharger la page pour recommencer
                }
            }, 1000);
        }

        // Fonction pour retourner au hub de jeu
        function returnToHub() {
            // Vous pouvez rediriger l'utilisateur vers le hub de jeu en utilisant window.location.href
            window.location.href = "index.html";
        }

        // Afficher la popup au chargement de la page
        openPopup();
    </script>
</body>
</html>

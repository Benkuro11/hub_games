<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informations météorologiques</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Informations météorologiques</h1>
    </header>
    <div id="weather-container">
        <h2>Données météorologiques actuelles pour <span id="city-name"></span></h2>
        <p id="weather-description"></p>
        <p id="temperature"></p>
        <p id="pressure"></p>
        <p id="humidity"></p>
        <p id="wind-speed"></p>
        <p id="longitude"></p>
        <p id="latitude"></p>
        <label for="city-input">Entrez une ville :</label>
        <input type="text" id="city-input" placeholder="Nom de la ville">
        <button id="fetch-button">Rechercher</button>
    </div>
    <button id="return-button" onclick="returnToHub()">Retour au hub de jeu</button>
    <div class="Copyright">
        <footer>Copyright &copy;  2023 By Klaynight. All rights reserved.</footer>
    </div>
    
    <script>
        function returnToHub() {
        // Vous pouvez rediriger l'utilisateur vers le hub de jeu en utilisant window.location.href
            window.location.href = "index.html";
}
        function fetchWeatherData() {
            const api_key = '2dbcf398107ead0a716a4773269a7b68';
            const url = 'https://api.openweathermap.org/data/2.5/weather';
            const cityInput = document.getElementById('city-input');
            const cityName = document.getElementById('city-name');
            const weatherDescription = document.getElementById('weather-description');
            const temperature = document.getElementById('temperature');
            const pressure = document.getElementById('pressure');
            const humidity = document.getElementById('humidity');
            const windSpeed = document.getElementById('wind-speed');
            const longitude = document.getElementById('longitude');
            const latitude = document.getElementById('latitude');

            const fetchButton = document.getElementById('fetch-button');
            
            fetchButton.addEventListener('click', () => {
                const ville = cityInput.value;

                const params = {
                    'q': ville,
                    'units': 'metric',
                    'lang': 'fr',
                    'appid': api_key
                }

                fetch(url + `?q=${ville}&units=metric&lang=fr&appid=${api_key}`)
                    .then(response => response.json())
                    .then(data => {
                        cityName.textContent = ville;
                        weatherDescription.textContent = `Temps : ${data.weather[0].description}`;
                        temperature.textContent = `Température : ${data.main.temp}°C`;
                        pressure.textContent = `Pression atmosphérique : ${data.main.pressure} hPa`;
                        humidity.textContent = `Humidité : ${data.main.humidity}%`;
                        windSpeed.textContent = `Vitesse de vent : ${data.wind.speed}m/s`;
                        longitude.textContent = `Longitude : ${data.coord.lon}`;
                        latitude.textContent = `Latitude : ${data.coord.lat}`;
                    })
                    .catch(error => {
                        console.error("La requête a échoué avec l'erreur :", error);
                    });
            });
        }

        fetchWeatherData();
    </script>
</body>
</html>
